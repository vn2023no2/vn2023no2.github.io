"use strict";(self.webpackChunkvn_2023_no_2_github_io=self.webpackChunkvn_2023_no_2_github_io||[]).push([[4856],{3062:(n,c,t)=>{t.r(c),t.d(c,{assets:()=>h,contentTitle:()=>r,default:()=>a,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var e=t(5893),i=t(1151);const o={sidebar_position:2},r="1. Socket l\xe0 g\xec?",s={id:"IT/network/socket",title:"socket",description:"B\xe0i vi\u1ebft n\xe0y ch\u1ec9 \u0111\u01a1n gi\u1ea3n gi\xfap c\xe1c b\u1ea1n hi\u1ec3u r\xf5 v\u1ec1 socket v\xe0 c\xe1c kh\xe1i ni\u1ec7m li\xean quan.",source:"@site/docs/IT/10-network/2-socket.md",sourceDirName:"IT/10-network",slug:"/IT/network/socket",permalink:"/docs/IT/network/socket",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/IT/10-network/2-socket.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Network",permalink:"/docs/IT/network/network"},next:{title:"elastic-stack",permalink:"/docs/category/elastic-stack"}},h={},l=[{value:"T\u1ea1o Stream Socket",id:"t\u1ea1o-stream-socket",level:2},{value:"T\u1ea1o Datagram Socket",id:"t\u1ea1o-datagram-socket",level:2}];function d(n){const c={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(c.p,{children:["B\xe0i vi\u1ebft n\xe0y ch\u1ec9 \u0111\u01a1n gi\u1ea3n gi\xfap c\xe1c b\u1ea1n hi\u1ec3u r\xf5 v\u1ec1 socket v\xe0 c\xe1c kh\xe1i ni\u1ec7m li\xean quan.",(0,e.jsx)(c.br,{}),"\n",'"b\u1ed1c ph\xe9t v\u1ec1 socket"']}),"\n",(0,e.jsx)(c.h1,{id:"1-socket-l\xe0-g\xec",children:"1. Socket l\xe0 g\xec?"}),"\n",(0,e.jsxs)(c.p,{children:["Socket d\u1ecbch n\xf4m na l\xe0 \u1ed5 c\u1eafm.\r\n",(0,e.jsx)(c.strong,{children:"V\u1ec1 m\u1eb7t physical"}),"\r\nC\xe1c b\u1ea1n c\xf3 th\u1ec3 hi\u1ec3u c\xe1c \u1ed5 c\u1eafm tr\xean b\u1ea5t k\u1ef3 thi\u1ebft b\u1ecb n\xe0o (th\u01b0\u1eddng l\xe0 c\xe1c thi\u1ebft b\u1ecb \u0111i\u1ec7n) \u0111\u1ec3 n\u1ed1i c\xe1c thi\u1ebft b\u1ecb kh\xe1c v\xe0o l\xe0 c\xe1c socket.",(0,e.jsx)(c.br,{}),"\n","Socket CPU (l\xe0 n\u01a1i \u0111\u1ec3 c\u1eafm CPU v\xe0o mainboard)"]}),"\n",(0,e.jsxs)(c.p,{children:[(0,e.jsx)(c.strong,{children:"V\u1ec1 m\u1eb7t logical (IT)"}),"\r\nSocket l\xe0 m\u1ed9t kh\xe1i ni\u1ec7m quan tr\u1ecdng trong CNTT, l\xe0 c\xe1ch cho ph\xe9p c\xe1c \u1ee9ng d\u1ee5ng giao ti\u1ebfp v\u1edbi nhau. N\xf3 l\xe0 \u0111i\u1ec3m cu\u1ed1i (end-point) trong li\xean k\u1ebft truy\u1ec1n th\xf4ng hai chi\u1ec1u (two-way communication) bi\u1ec3u di\u1ec5n k\u1ebft n\u1ed1i gi\u1eefa Client \u2013 Server."]}),"\n",(0,e.jsx)(c.p,{children:"T\u01b0\u1edfng t\u01b0\u1ee3ng r\u1eb1ng gi\u1eefa c\xe1c \u1ee9ng d\u1ee5ng hay process ch\u1ea1y tr\xean m\u1ea1ng hay m\xe1y t\xednh c\u1ea7n c\xf3 m\u1ed9t li\xean k\u1ebft \u0111\u1ec3 ch\xfang c\xf3 th\u1ec3 n\xf3i chuy\u1ec7n v\u1edbi nhau. \u0110i\u1ec3m cu\u1ed1i c\u1ee7a li\xean k\u1ebft n\xe0y g\u1ecdi l\xe0 socket."}),"\n",(0,e.jsx)(c.p,{children:'Trong ng\u1eef c\u1ea3nh th\xf4ng th\u01b0\u1eddng khi n\xf3i \u0111\u1ebfn socket th\xec ch\xfang s\u1ebd hi\u1ec3u l\xe0 \u0111ang n\xf3i \u0111\u1ebfn "network socket" (g\u1ed3m stream socket v\xe0 datagram socket) v\xe0 khi \u0111\xf3 socket \u0111\u01b0\u1ee3c \u0111\u1ea1i di\u1ec7n b\u1edfi IP, port v\xe0 protocol.'}),"\n",(0,e.jsx)(c.pre,{children:(0,e.jsx)(c.code,{children:"Socket = IP + Port + Protocol\n"})}),"\n",(0,e.jsxs)(c.p,{children:["Ngo\xe0i ra, c\xf3 m\u1ed9t s\u1ed1 lo\u1ea1i socket kh\xf4ng c\u1ea7n s\u1eed d\u1ee5ng IP v\xe0 port nh\u01b0 ",(0,e.jsx)(c.code,{children:"unix socket"})," (s\u1eed d\u1ee5ng \u0111\u1ecba ch\u1ec9 file tr\xean h\u1ec7 th\u1ed1ng \u0111\u1ec3 giao ti\u1ebfp trong c\xf9ng m\u1ed9t m\xe1y t\xednh v\u1edbi nhau): ti\xeau bi\u1ec3u cho lo\u1ea1i n\xe0y c\xf3 th\u1ec3 k\u1ec3 \u0111\u1ebfn c\xe1c \u1ee9ng d\u1ee5ng nh\u01b0 Docker s\u1eed d\u1ee5ng file ",(0,e.jsx)(c.code,{children:"/var/run/docker.sock"}),", MySQL s\u1eed d\u1ee5ng file ",(0,e.jsx)(c.code,{children:"/var/run/mysql/mysql.sock"}),", ..."]}),"\n",(0,e.jsx)(c.p,{children:"C\u1ea5u tr\xfac v\xe0 thu\u1ed9c t\xednh c\u1ee7a socket \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a b\u1edfi Socket API l\u1eadp tr\xecnh l\xean n\xf3."}),"\n",(0,e.jsxs)(c.p,{children:["Trong ng\u1eef c\u1ea3nh h\u1eb9p h\u01a1n l\xe0 l\u1eadp tr\xecnh m\u1ea1ng, khi n\xf3i \u0111\u1ebfn socket, c\u0169ng c\xf3 th\u1ec3 hi\u1ec3u l\xe0 \u0111ang n\xf3i \u0111\u1ebfn socket API - n\xf3 l\xe0 m\u1ed9t ",(0,e.jsx)(c.code,{children:"giao di\u1ec7n l\u1eadp tr\xecnh \u1ee9ng d\u1ee5ng (API)"})," cung c\u1ea5p c\xe1c h\xe0m, c\u1ea5u tr\xfac d\u1eef li\u1ec7u ... cho ph\xe9p c\xe1c l\u1eadp tr\xecnh vi\xean l\u1eadp tr\xecnh c\xe1c \u1ee9ng d\u1ee5ng t\u1ea1o, k\u1ebft n\u1ed1i v\xe0 qu\u1ea3n l\xfd c\xe1c k\u1ebft n\u1ed1i m\u1ea1ng trong m\u1ea1ng m\xe1y t\xednh."]}),"\n",(0,e.jsx)(c.h1,{id:"m\u1ed9t-s\u1ed1-\u0111\u1eb7c-\u0111i\u1ec3m-c\u1ee7a-socket",children:"M\u1ed9t s\u1ed1 \u0111\u1eb7c \u0111i\u1ec3m c\u1ee7a socket"}),"\n",(0,e.jsxs)(c.ul,{children:["\n",(0,e.jsx)(c.li,{children:"Socket th\u01b0\u1eddng ho\u1ea1t \u0111\u1ed9ng \u1edf t\u1ea7ng 4 trong m\xf4 h\xecnh OSI (network socket)."}),"\n",(0,e.jsx)(c.li,{children:"C\xf3 nhi\u1ec1u lo\u1ea1i socket v\xe0 c\u0169ng c\xf3 nhi\u1ec1u c\xe1ch ph\xe2n lo\u1ea1i socket nh\u01b0: ph\xe2n lo\u1ea1i theo h\u01b0\u1edbng k\u1ebft n\u1ed1i, ph\xe2n lo\u1ea1i theo OS, ..."}),"\n"]}),"\n",(0,e.jsx)(c.h1,{id:"2-c\xe1c-lo\u1ea1i-socket",children:"2. C\xe1c lo\u1ea1i socket"}),"\n",(0,e.jsx)(c.p,{children:"C\xf3 2 lo\u1ea1i socket ch\xednh l\xe0:"}),"\n",(0,e.jsxs)(c.ul,{children:["\n",(0,e.jsx)(c.li,{children:"stream socket - \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng v\u1edbi TCP protocol."}),"\n",(0,e.jsx)(c.li,{children:"datagram socket - \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng v\u1edbi UDP protocol."}),"\n"]}),"\n",(0,e.jsx)(c.p,{children:"Ngo\xe0i ra c\xf2n c\xf3 m\u1ed9t s\u1ed1 lo\u1ea1i socket kh\xe1c nh\u01b0:"}),"\n",(0,e.jsxs)(c.ul,{children:["\n",(0,e.jsxs)(c.li,{children:["WebSocket - L\xe0 m\u1ed9t giao th\u1ee9c truy\u1ec1n tin d\u1ef1a tr\xean k\u1ebft n\u1ed1i TCP, \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 t\u1ea1o ra k\u1ebft n\u1ed1i hai chi\u1ec1u v\xe0 t\u01b0\u01a1ng t\xe1c gi\u1eefa ",(0,e.jsx)(c.code,{children:"web browser"})," v\xe0 ",(0,e.jsx)(c.code,{children:"server"}),". Ch\xfang cung c\u1ea5p kh\u1ea3 n\u0103ng giao ti\u1ebfp hi\u1ec7u qu\u1ea3 v\xe0 th\u1eddi gian th\u1ef1c h\u01a1n so v\u1edbi c\xe1c ph\u01b0\u01a1ng th\u1ee9c truy\u1ec1n th\u1ed1ng nh\u01b0 HTTP. Kh\xf4ng nh\u01b0 socket th\xf4ng th\u01b0\u1eddng, WebSocket ho\u1ea1t \u0111\u1ed9ng \u1edf Layer 7 trong m\xf4 h\xecnh OSI."]}),"\n",(0,e.jsx)(c.li,{children:"Unix Socket - S\u1eed d\u1ee5ng \u0111\u1ecba ch\u1ec9 file tr\xean h\u1ec7 th\u1ed1ng \u0111\u1ec3 giao ti\u1ebfp trong c\xf9ng m\u1ed9t m\xe1y t\xednh v\u1edbi nhau thay v\xec network."}),"\n",(0,e.jsx)(c.li,{children:"..."}),"\n"]}),"\n",(0,e.jsx)(c.h1,{id:"3-th\u1ef1c-h\xe0nh",children:"3. Th\u1ef1c h\xe0nh"}),"\n",(0,e.jsxs)(c.p,{children:['C\xe1c n\u1ed9i dung b\xean d\u01b0\u1edbi s\u1ebd \u0111\u1ec1 c\u1eadp \u0111\u1ebfn kh\xe1i ni\u1ec7m socket trong ng\u1eef c\u1ea3nh th\xf4ng th\u01b0\u1eddng t\u1ee9c "network socket".',(0,e.jsx)(c.br,{}),"\n","\u0110\u1ea3m b\u1ea3o r\u1eb1ng c\xf3 b\u1ea1n c\xf3 m\u1ed9t m\xf4i tr\u01b0\u1eddng Linux v\xe0 \u0111\xe3 c\xe0i \u0111\u1eb7t s\u1eb5n c\xe1c l\u1ec7nh ",(0,e.jsx)(c.code,{children:"netstat"}),", ",(0,e.jsx)(c.code,{children:"nc"}),", ",(0,e.jsx)(c.code,{children:"socat"})," \u0111\u1ec3 c\xf3 th\u1ec3 th\u1ef1c h\xe0nh c\xe1c n\u1ed9i dung b\xean d\u01b0\u1edbi.",(0,e.jsx)(c.br,{}),"\n","N\u1ebfu ch\u01b0a c\xe0i \u0111\u1eb7t th\xec c\xe1c b\u1ea1n c\xf3 th\u1ec3 ch\u1ea1y l\u1ec7nh b\xean d\u01b0\u1edbi \u0111\u1ec3 ti\u1ebfn h\xe0nh c\xe0i \u0111\u1eb7t (\u0110\u1ed1i v\u1edbi Ubuntu)"]}),"\n",(0,e.jsx)(c.pre,{children:(0,e.jsx)(c.code,{children:"sudo apt install net-tools netcat socat\n"})}),"\n",(0,e.jsx)(c.h2,{id:"t\u1ea1o-stream-socket",children:"T\u1ea1o Stream Socket"}),"\n",(0,e.jsx)(c.p,{children:"T\u1ea1o m\u1ed9t TCP socket listen \u1edf c\u1ed5ng 8181"}),"\n",(0,e.jsx)(c.pre,{children:(0,e.jsx)(c.code,{children:"$ socat TCP4-LISTEN:8181,fork /dev/null&\r\n[1] 31835\n"})}),"\n",(0,e.jsx)(c.p,{children:"Trong \u0111\xf3:"}),"\n",(0,e.jsxs)(c.ul,{children:["\n",(0,e.jsxs)(c.li,{children:[(0,e.jsx)(c.code,{children:"fork"})," - option n\xe0y \u0111\u1ea3m b\u1ea3o r\u1eb1ng ti\u1ebfn tr\xecnh v\u1eeba \u0111\u01b0\u1ee3c t\u1ea1o ra b\u1edfi l\u1ec7nh socat s\u1ebd ti\u1ebfp t\u1ee5c LISTEN sau khi x\u1eed l\xfd k\u1ebft n\u1ed1i."]}),"\n",(0,e.jsxs)(c.li,{children:[(0,e.jsx)(c.code,{children:"/dev/null"})," - option n\xe0y \u0111\u1ea3m b\u1ea3o linux s\u1ebd x\xf3a m\u1ecdi output \u0111\u01b0\u1ee3c in ra b\u1edfi l\u1ec7nh socat."]}),"\n",(0,e.jsxs)(c.li,{children:[(0,e.jsx)(c.code,{children:"&"})," - y\xeau c\u1ea7u linux ch\u1ea1y l\u1ec7nh socat tr\xean \u1edf background."]}),"\n"]}),"\n",(0,e.jsx)(c.p,{children:"C\xe1c b\u1ea1n c\xf3 th\u1ec3 ki\u1ec3m tra Socket \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o v\u1edbi l\u1ec7nh netstat"}),"\n",(0,e.jsx)(c.pre,{children:(0,e.jsx)(c.code,{children:"$ netstat -tulpn | grep 8181\r\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\r\n. . .\r\ntcp        0      0 0.0.0.0:8181            0.0.0.0:*               LISTEN      31835/socat\r\n. . .\n"})}),"\n",(0,e.jsx)(c.p,{children:"S\u1eed d\u1ee5ng netcat \u0111\u1ec3 test connection t\u1edbi TCP socket \u0111\xe3 t\u1ea1o"}),"\n",(0,e.jsx)(c.pre,{children:(0,e.jsx)(c.code,{children:"$ nc -vz 127.0.0.1 8181\r\nConnection to 127.0.0.1 8181 port [tcp/*] succeeded!\n"})}),"\n",(0,e.jsx)(c.h2,{id:"t\u1ea1o-datagram-socket",children:"T\u1ea1o Datagram Socket"}),"\n",(0,e.jsx)(c.p,{children:"T\u1ea1o m\u1ed9t UDP socket listen \u1edf c\u1ed5ng 8181"}),"\n",(0,e.jsx)(c.pre,{children:(0,e.jsx)(c.code,{children:"$ socat UDP4-LISTEN:8181,fork /dev/null&\r\n[1] 31936\n"})}),"\n",(0,e.jsxs)(c.p,{children:["\u1ede \u0111\xe2y, v\xec m\u1ed7i network socket \u0111\u01b0\u1ee3c ph\xe2n bi\u1ec7t v\u1edbi nhau b\u1eb1ng IP, port v\xe0 giao th\u1ee9c n\xean ch\xfang ta c\xf3 th\u1ec3 ti\u1ebfp t\u1ee5c s\u1eed d\u1ee5ng port 8181 cho giao th\u1ee9c UDP m\xe0 kh\xf4ng b\u1ecb xung \u0111\u1ed9t.",(0,e.jsx)(c.br,{}),"\n","C\xe1c b\u1ea1n c\xf3 th\u1ec3 ki\u1ec3m tra Socket \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o v\u1edbi l\u1ec7nh netstat"]}),"\n",(0,e.jsx)(c.pre,{children:(0,e.jsx)(c.code,{children:"Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\r\n. . .\r\nudp        0      0 0.0.0.0:8181            0.0.0.0:*                           4049/socat\r\n. . .\n"})}),"\n",(0,e.jsx)(c.p,{children:"S\u1eed d\u1ee5ng netcat \u0111\u1ec3 test connection t\u1edbi TCP socket \u0111\xe3 t\u1ea1o"}),"\n",(0,e.jsx)(c.pre,{children:(0,e.jsx)(c.code,{children:"$ nc -vz -u 127.0.0.1 8181\r\nConnection to 127.0.0.1 8181 port [udp/*] succeeded!\n"})}),"\n",(0,e.jsxs)(c.p,{children:[(0,e.jsx)(c.code,{children:"-u"})," - option n\xe0y \u0111\u1ec3 y\xeau c\u1ea7u netcat s\u1eed d\u1ee5ng ",(0,e.jsx)(c.code,{children:"UDP"})," thay v\xec ",(0,e.jsx)(c.code,{children:"TCP"}),".\r\n\u0110\u1ec3 d\u1ecdn d\u1eb9p c\xe1c socket v\u1eeba t\u1ea1o, c\xe1c b\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng l\u1ec7nh ",(0,e.jsx)(c.code,{children:"kill -15 <PID>"}),". \u1ede \u0111\xe2y m\xecnh s\u1ebd x\xf3a 2 socket v\u1eeba t\u1ea1o"]}),"\n",(0,e.jsx)(c.pre,{children:(0,e.jsx)(c.code,{children:"kill -15 31835 31936\n"})}),"\n",(0,e.jsxs)(c.p,{children:["C\xe1c b\u1ea1n nh\u1edb thay b\u1eb1ng ",(0,e.jsx)(c.code,{children:"<PID>"})," c\u1ee7a ti\u1ebfn tr\xecnh socket c\xe1c b\u1ea1n \u0111\xe3 t\u1ea1o nh\xe9!!!",(0,e.jsx)(c.br,{}),"\n",(0,e.jsx)(c.code,{children:"References:"}),(0,e.jsx)(c.br,{}),"\n",(0,e.jsx)(c.a,{href:"https://www.digitalocean.com/community/tutorials/understanding-sockets",children:"https://www.digitalocean.com/community/tutorials/understanding-sockets"})]})]})}function a(n={}){const{wrapper:c}={...(0,i.a)(),...n.components};return c?(0,e.jsx)(c,{...n,children:(0,e.jsx)(d,{...n})}):d(n)}},1151:(n,c,t)=>{t.d(c,{Z:()=>s,a:()=>r});var e=t(7294);const i={},o=e.createContext(i);function r(n){const c=e.useContext(o);return e.useMemo((function(){return"function"==typeof n?n(c):{...c,...n}}),[c,n])}function s(n){let c;return c=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),e.createElement(o.Provider,{value:c},n.children)}}}]);